# Weather Bot V2 - –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

## üìã –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ –≤–µ—Ä—Å–∏–∏ 2.0

### 1. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

#### `storage.py` - –ú–æ–¥—É–ª—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `load_user(user_id: int) -> dict` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `save_user(user_id: int, data: dict) -> None` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:
```json
{
  "<user_id>": {
    "city": "–ú–æ—Å–∫–≤–∞",
    "lat": 55.7558,
    "lon": 37.6176,
    "notifications": {
      "enabled": true,
      "interval_h": 2
    },
    "last_weather": null
  }
}
```

#### `cache.py` - –ú–æ–¥—É–ª—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ 10 –º–∏–Ω—É—Ç
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ `./.cache/*.json`
- –ö–ª—é—á–∏ –∫—ç—à–∞: `lat`, `lon`, `endpoint`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

#### `weather_cached.py` - –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è API —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenWeatherMap API
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `weather_app_v2.py` –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### 2. **–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**

#### –ö–Ω–æ–ø–∫–∞ "üå§Ô∏è –¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞"
- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã:
  - üèôÔ∏è –ü–æ –≥–æ—Ä–æ–¥—É - –≤–≤–æ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
  - üìç –ü–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –ª–æ–∫–∞—Ü–∏—é
- –ï—Å–ª–∏ –ª–æ–∫–∞—Ü–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞, –±–æ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –µ—ë –æ—Ç–ø—Ä–∞–≤–∏—Ç—å

#### –£–ª—É—á—à–µ–Ω–Ω–æ–µ –º–µ–Ω—é –ø—Ä–æ–≥–Ω–æ–∑–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "‚óÄÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏–∑ –ø—Ä–æ–≥–Ω–æ–∑–∞
- –£–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –¥–Ω—è–º–∏
- –ö–Ω–æ–ø–∫–∞ "‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –¥–Ω–µ–π" –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–Ω—è

#### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –≤—ã–±–æ—Ä–æ–º
- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
  - üèôÔ∏è –ü–æ –≥–æ—Ä–æ–¥—É
  - üìç –ü–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### 3. **Inline-—Ä–µ–∂–∏–º** üöÄ

–¢–µ–ø–µ—Ä—å –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ inline-—Ä–µ–∂–∏–º–µ! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ –ª—é–±–æ–º —á–∞—Ç–µ:

```
@weather_bot –ú–æ—Å–∫–≤–∞
@weather_bot London
@weather_bot Tokyo
```

–ë–æ—Ç –≤–µ—Ä–Ω—ë—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Å:
- üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π –∏ –æ—â—É—â–∞–µ–º–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π
- üìù –û–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ–≥–æ–¥—ã
- üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å—é
- üå™Ô∏è –°–∫–æ—Ä–æ—Å—Ç—å—é –≤–µ—Ç—Ä–∞

–†–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä—è–º–æ –≤ —á–∞—Ç!

### 4. **–°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 10 –º–∏–Ω—É—Ç:
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è –ª–∏–º–∏—Ç–æ–≤ API

–ö—ç—à —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `./.cache/` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
```bash
pip install -r requirements.txt
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
BOT_TOKEN=–≤–∞—à_telegram_bot_token
API_KEY=–≤–∞—à_openweathermap_api_key
```

### –ó–∞–ø—É—Å–∫
```bash
python bot_v2.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
weather_api/
‚îú‚îÄ‚îÄ bot_v2.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ (–≤–µ—Ä—Å–∏—è 2.0)
‚îú‚îÄ‚îÄ storage.py             # –ú–æ–¥—É–ª—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ cache.py               # –ú–æ–¥—É–ª—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ weather_cached.py      # –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è API —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îú‚îÄ‚îÄ weather_app_v2.py      # –ú–æ–¥—É–ª—å —Ä–∞–±–æ—Ç—ã —Å OpenWeatherMap API
‚îú‚îÄ‚îÄ user_data.json         # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ .cache/                # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫—ç—à–∞ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ *.json            # –§–∞–π–ª—ã –∫—ç—à–∞
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README_V2.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

## üéÆ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` –∏–ª–∏ `/help` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Å–ø—Ä–∞–≤–∫–∞
- `/weather [–≥–æ—Ä–æ–¥]` - —Ç–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞
- `/forecast` - –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π
- `/compare [–≥–æ—Ä–æ–¥1] [–≥–æ—Ä–æ–¥2]` - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤
- `/extended [–≥–æ—Ä–æ–¥]` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `/subscribe` - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `/unsubscribe` - –æ—Ç–ø–∏—Å–∫–∞ –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é
- üå§Ô∏è **–¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞** - –≤—ã–±–æ—Ä –ø–æ –≥–æ—Ä–æ–¥—É –∏–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- üìÖ **–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑
- üìç **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
- ‚öñÔ∏è **–°—Ä–∞–≤–Ω–∏—Ç—å –≥–æ—Ä–æ–¥–∞** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –≤ –¥–≤—É—Ö –≥–æ—Ä–æ–¥–∞—Ö
- üìä **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è + –∫–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞
- üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≥–æ–¥–Ω—ã—Ö –æ–ø–æ–≤–µ—â–µ–Ω–∏–π

## üîß API —Ñ—É–Ω–∫—Ü–∏–∏

### –ú–æ–¥—É–ª—å `storage.py`

```python
from storage import load_user, save_user, update_user_location

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_data = load_user(user_id)

# –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é
update_user_location(user_id, city="–ú–æ—Å–∫–≤–∞", lat=55.7558, lon=37.6176)

# –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
update_user_notifications(user_id, enabled=True, interval_h=2)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ª–æ–∫–∞—Ü–∏–∏
has_location(user_id)  # bool

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
subscribed = get_subscribed_users()  # dict
```

### –ú–æ–¥—É–ª—å `cache.py`

```python
from cache import get_cached, set_cached, clear_cache

# –ü–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
data = get_cached(lat=55.7558, lon=37.6176, endpoint="weather")

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫—ç—à
set_cached(lat=55.7558, lon=37.6176, endpoint="weather", data=weather_data)

# –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫—ç—à
clear_cache()

# –û—á–∏—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫—ç—à
clear_old_cache()

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
stats = get_cache_stats()
```

### –ú–æ–¥—É–ª—å `weather_cached.py`

```python
from weather_cached import (
    get_current_weather,
    get_weather_by_coordinates,
    get_coordinates,
    get_hourly_weather,
    get_air_pollution
)

# –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—ç—à!
weather = get_current_weather(city="–ú–æ—Å–∫–≤–∞")
forecast = get_hourly_weather(lat=55.7558, lon=37.6176)
pollution = get_air_pollution(lat=55.7558, lon=37.6176)
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –Ω–∞–∂–∏–º–∞–µ—Ç "üå§Ô∏è –¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞"
–ë–æ—Ç: –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±–æ—Ä (–≥–æ—Ä–æ–¥ –∏–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è)
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –≤—ã–±–∏—Ä–∞–µ—Ç "üèôÔ∏è –ü–æ –≥–æ—Ä–æ–¥—É"
–ë–æ—Ç: –ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –≤–≤–æ–¥–∏—Ç "–ú–æ—Å–∫–≤–∞"
–ë–æ—Ç: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É —Å —ç–º–æ–¥–∑–∏
```

### –ü—Ä–∏–º–µ—Ä 2: Inline-—Ä–µ–∂–∏–º
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –≤ –ª—é–±–æ–º —á–∞—Ç–µ –ø–∏—à–µ—Ç "@weather_bot –ü–∞—Ä–∏–∂"
–ë–æ—Ç: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Å –ø–æ–≥–æ–¥–æ–π –≤ –ü–∞—Ä–∏–∂–µ
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ–≥–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —á–∞—Ç
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –Ω–∞–∂–∏–º–∞–µ—Ç "üìÖ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π"
–ë–æ—Ç: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–Ω–µ–π —Å –∫—Ä–∞—Ç–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –≤—ã–±–∏—Ä–∞–µ—Ç –¥–µ–Ω—å
–ë–æ—Ç: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ —á–∞—Å–∞–º
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –Ω–∞–∂–∏–º–∞–µ—Ç "‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –¥–Ω–µ–π"
–ë–æ—Ç: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Å–ø–∏—Å–∫—É –¥–Ω–µ–π
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –Ω–∞–∂–∏–º–∞–µ—Ç "‚óÄÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
–ë–æ—Ç: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
```

## üîî –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø–æ–≥–æ–¥—É –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –û —á—ë–º —É–≤–µ–¥–æ–º–ª—è–µ—Ç –±–æ—Ç:
- üåßÔ∏è –ü—Ä–∏–±–ª–∏–∂–∞—é—â–∏–π—Å—è –¥–æ–∂–¥—å –∏–ª–∏ —Å–Ω–µ–≥ (–≤ –±–ª–∏–∂–∞–π—à–∏–µ 12 —á–∞—Å–æ–≤)
- ‚õàÔ∏è –ì—Ä–æ–∑—ã –∏ –æ–ø–∞—Å–Ω—ã–µ —è–≤–ª–µ–Ω–∏—è
- üå°Ô∏è –†–µ–∑–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (–±–æ–ª–µ–µ 5¬∞C)

### –ö–∞–∫ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è:
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –±–æ—Ç—É
2. –ù–∞–∂–∞—Ç—å "üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
3. –ù–∞–∂–∞—Ç—å "üîî –í–∫–ª—é—á–∏—Ç—å"

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞
```python
from cache import get_cache_stats

stats = get_cache_stats()
print(f"–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: {stats['total_files']}")
print(f"–ê–∫—Ç–∏–≤–Ω—ã—Ö: {stats['valid_files']}")
print(f"–£—Å—Ç–∞—Ä–µ–≤—à–∏—Ö: {stats['expired_files']}")
print(f"–†–∞–∑–º–µ—Ä: {stats['total_size_bytes']} –±–∞–π—Ç")
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –£–¥–∞–ª–∏—Ç—å –∫—ç—à
rm -rf .cache/

# –°–±—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
rm user_data.json
```

## üÜö –û—Ç–ª–∏—á–∏—è –æ—Ç V1

| –§—É–Ω–∫—Ü–∏—è | V1 (bot.py) | V2 (bot_v2.py) |
|---------|-------------|----------------|
| –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ | –ú–æ–¥—É–ª—å `storage.py` |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API | ‚ùå –ù–µ—Ç | ‚úÖ 10 –º–∏–Ω—É—Ç –≤ `.cache/` |
| –ö–Ω–æ–ø–∫–∞ "–¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞" | –¢–æ–ª—å–∫–æ –ø–æ –≥–æ—Ä–æ–¥—É | –í—ã–±–æ—Ä: –≥–æ—Ä–æ–¥/–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è |
| –ú–µ–Ω—é –ø—Ä–æ–≥–Ω–æ–∑–∞ | –ë–µ–∑ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" | –° –∫–Ω–æ–ø–∫–æ–π –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –¢–æ–ª—å–∫–æ –≥–æ—Ä–æ–¥/–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è | –í—ã–±–æ—Ä —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–æ–∫–∞—Ü–∏–∏ |
| Inline-—Ä–µ–∂–∏–º | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ user_data | `location` –æ–±—ä–µ–∫—Ç | –û—Ç–¥–µ–ª—å–Ω—ã–µ `city`, `lat`, `lon` |
| Notifications | `subscribed: bool` | `notifications: {enabled, interval_h}` |

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫**: –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏
2. **Inline-—Ä–µ–∂–∏–º**: –≤–∫–ª—é—á–∏—Ç–µ inline-—Ä–µ–∂–∏–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
3. **–ö—ç—à**: –∫—ç—à —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
5. **–õ–∏–º–∏—Ç—ã API**: –±–ª–∞–≥–æ–¥–∞—Ä—è –∫—ç—à—É, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ä–∞–∑—ã

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)
- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ `user_data.json` (–¥–æ–±–∞–≤–∏—Ç—å –≤ `.gitignore`)
- –ö—ç—à –≤ `.cache/` (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.

---

**–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! üå¶Ô∏è**

